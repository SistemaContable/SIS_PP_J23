/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package Facturacion;

import Contabilidad.*;
import Interface.*;
import Clases_Auxiliares.Conexion;
import Clases_Auxiliares.Fechas;
import Clases_Auxiliares.Validaciones;
import Objetos.Asiento;
import Objetos.Cliente;
import Objetos.Cuenta;
import Objetos.Usuario;
import java.awt.Color;
import java.awt.Component;
import java.awt.event.KeyEvent;
import java.beans.PropertyVetoException;
import java.math.BigDecimal;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.DecimalFormat;
import java.text.DecimalFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Manolo
 */
public class IGUI_Facturar extends javax.swing.JInternalFrame {

    /**
     * Creates new form GUI_A_Prod
     */
    private Conexion r_con;
    private String name_tabla="borrador_asientos";
    private Usuario usuario;    
    private int renglon,modificar;
    private DefaultTableModelAsientos modelo;    
    private boolean esCarga=false;    
    
    private int numeroControl=-1;
    
    //libreria de manejo de fechas
    private Fechas fecha = new Fechas ();    
    private Cliente cliente_factura;
    
    public IGUI_Facturar(Usuario usr,Conexion con) {
        initComponents();
        r_con=con;
        usuario=usr;
        renglon=0;
        modificar=-1;
        r_con.Connection();
        inicializarTabla();
        inicializarIvas();
        
        this.habilitarPanel1(true);
        this.habilitarPanel2(false);     
        
        jButton1.setText("Cancelar"); 
        jButton2.setEnabled(false);        
        btn_confirmar_encabezado.setEnabled(false);
        jTable1.setEnabled(false);
        fecha_factura.setText(fecha.getHoy());        
        ordenarFoco();
        field_tipo_comprobante.requestFocus();
    }

    private void inicializarIvas(){        
        BigDecimal cero=new BigDecimal(0);
        field_iva_general.setText(cero+"");
        field_tasa_diferencial.setText(cero+"");
        field_tasa_reducida.setText(cero+"");
        field_exento.setText(cero+"");
        field_sobretasa.setText(cero+"");
        field_impuesto_interno.setText(cero+"");
        field_no_gravado.setText(cero+"");
        field_total_iva.setText(cero+"");
        jTextField10.setText(cero+"");
        jTextField11.setText(cero+"");        
    }    
    
    private void vaciar_panel_datos(){
        field_tipo_comprobante.requestFocus();
        this.vaciar_cliente();
        fecha_factura.setText(fecha.getHoy());
        field_tipo_comprobante.setText("");
        field_punto_venta.setText("");
        field_nro_cliente.setText("");
        label_numero_factura.setText(" ");
    }
    
    private void habilitarConfirmar1(){
        btn_confirmar_encabezado.setEnabled(false);
        if(!field_tipo_comprobante.getText().equals(""))
            if(!field_punto_venta.getText().equals(""))
                if(!field_nro_cliente.getText().equals(""))
                    if(!fecha_factura.getText().equals(""))
                        btn_confirmar_encabezado.setEnabled(true);                                        
    }
    
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jLabel1 = new javax.swing.JLabel();
        panel_datos_factura = new javax.swing.JPanel();
        field_tipo_comprobante = new javax.swing.JTextField();
        field_punto_venta = new javax.swing.JTextField();
        field_nro_cliente = new javax.swing.JTextField();
        fecha_factura = new javax.swing.JFormattedTextField();
        field_nombre = new javax.swing.JTextField();
        field_cuil_1 = new javax.swing.JTextField();
        field_cuil_2 = new javax.swing.JTextField();
        field_cuil_3 = new javax.swing.JTextField();
        field_direccion_calle = new javax.swing.JTextField();
        field_direccion_nro = new javax.swing.JTextField();
        field_localidad = new javax.swing.JTextField();
        field_situacion_IVA = new javax.swing.JTextField();
        btn_confirmar_encabezado = new javax.swing.JButton();
        label_tipo_comprobante = new javax.swing.JLabel();
        label_numero_factura = new javax.swing.JLabel();
        label_situacion = new javax.swing.JLabel();
        jLabel26 = new javax.swing.JLabel();
        jLabel28 = new javax.swing.JLabel();
        jLabel24 = new javax.swing.JLabel();
        jLabel25 = new javax.swing.JLabel();
        jLabel27 = new javax.swing.JLabel();
        jLabel29 = new javax.swing.JLabel();
        jLabel30 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jLabel31 = new javax.swing.JLabel();
        jLabel32 = new javax.swing.JLabel();
        jLabel33 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jLabel6 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jTextField6 = new javax.swing.JTextField();
        jTextField7 = new javax.swing.JTextField();
        jTextField8 = new javax.swing.JTextField();
        jButton4 = new javax.swing.JButton();
        boton7 = new javax.swing.JButton();
        jTextField12 = new javax.swing.JTextField();
        jLabel17 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jPanel6 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jTextField10 = new javax.swing.JTextField();
        jTextField11 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        field_exento = new javax.swing.JTextField();
        field_impuesto_interno = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        field_tasa_diferencial = new javax.swing.JTextField();
        field_tasa_reducida = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        field_iva_general = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        field_sobretasa = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        field_no_gravado = new javax.swing.JTextField();
        jLabel11 = new javax.swing.JLabel();
        field_total_iva = new javax.swing.JTextField();
        label_mensaje = new javax.swing.JLabel();

        setBackground(new java.awt.Color(204, 204, 204));
        setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Gestion de Facturacion");
        setFrameIcon(new javax.swing.ImageIcon(getClass().getResource("/Iconos/articulo.png"))); // NOI18N
        setInheritsPopupMenu(true);

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Facturación:");

        panel_datos_factura.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        panel_datos_factura.setFocusCycleRoot(true);

        field_tipo_comprobante.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                field_tipo_comprobanteFocusLost(evt);
            }
        });
        field_tipo_comprobante.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                field_tipo_comprobanteKeyPressed(evt);
            }
        });

        field_punto_venta.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                field_punto_ventaFocusLost(evt);
            }
        });
        field_punto_venta.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                field_punto_ventaKeyPressed(evt);
            }
        });

        field_nro_cliente.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                field_nro_clienteFocusLost(evt);
            }
        });
        field_nro_cliente.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                field_nro_clienteKeyPressed(evt);
            }
        });

        try {
            fecha_factura.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("##/##/####")));
        } catch (java.text.ParseException ex) {
            ex.printStackTrace();
        }
        fecha_factura.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                fecha_facturaFocusLost(evt);
            }
        });

        field_nombre.setEditable(false);

        field_cuil_1.setEditable(false);

        field_cuil_2.setEditable(false);

        field_cuil_3.setEditable(false);

        field_direccion_calle.setEditable(false);

        field_direccion_nro.setEditable(false);

        field_localidad.setEditable(false);

        field_situacion_IVA.setEditable(false);

        btn_confirmar_encabezado.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Iconos/aceptar.png"))); // NOI18N
        btn_confirmar_encabezado.setText("Confirmar");
        btn_confirmar_encabezado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_confirmar_encabezadoActionPerformed(evt);
            }
        });

        label_tipo_comprobante.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_tipo_comprobante.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        label_tipo_comprobante.setText("TIPO COMPROBANTE:");

        label_numero_factura.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_numero_factura.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        label_numero_factura.setText(" ");

        label_situacion.setForeground(new java.awt.Color(0, 153, 51));
        label_situacion.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        label_situacion.setText("  ");

        jLabel26.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel26.setText("Tipo Comprobante:");

        jLabel28.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel28.setText("Pto. Venta:");

        jLabel24.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel24.setText("Nro. Cliente:");

        jLabel25.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel25.setText("Sr./Sra.:");

        jLabel27.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel27.setText("CUIL:");

        jLabel29.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel29.setText("-");

        jLabel30.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel30.setText("-");

        jLabel16.setText("Fecha Operación");

        jLabel31.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel31.setText("Direccion");

        jLabel32.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel32.setText("Localidad:");

        jLabel33.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel33.setText("Sit. IVA");

        javax.swing.GroupLayout panel_datos_facturaLayout = new javax.swing.GroupLayout(panel_datos_factura);
        panel_datos_factura.setLayout(panel_datos_facturaLayout);
        panel_datos_facturaLayout.setHorizontalGroup(
            panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                .addComponent(label_tipo_comprobante, javax.swing.GroupLayout.PREFERRED_SIZE, 378, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(label_numero_factura, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel26, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(field_tipo_comprobante))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel28, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(field_punto_venta)))
                    .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(jLabel16, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                        .addComponent(fecha_factura, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 92, Short.MAX_VALUE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabel31, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                .addComponent(field_direccion_calle, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(field_direccion_nro, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(field_localidad)
                            .addComponent(jLabel32, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(12, 12, 12)
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel33, javax.swing.GroupLayout.DEFAULT_SIZE, 70, Short.MAX_VALUE)
                            .addComponent(field_situacion_IVA))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(label_situacion, javax.swing.GroupLayout.PREFERRED_SIZE, 173, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel24, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(field_nro_cliente, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(field_nombre, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel25, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel27, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                .addComponent(field_cuil_1, javax.swing.GroupLayout.PREFERRED_SIZE, 37, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel29)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(field_cuil_2, javax.swing.GroupLayout.PREFERRED_SIZE, 84, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel30)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(field_cuil_3, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(47, 47, 47)
                                .addComponent(btn_confirmar_encabezado)))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        panel_datos_facturaLayout.setVerticalGroup(
            panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panel_datos_facturaLayout.createSequentialGroup()
                .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(label_tipo_comprobante)
                    .addComponent(label_numero_factura))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel28)
                    .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                    .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(jLabel25)
                                        .addComponent(jLabel27))
                                    .addGap(33, 33, 33))
                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panel_datos_facturaLayout.createSequentialGroup()
                                    .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                        .addComponent(jLabel24)
                                        .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                            .addGap(14, 14, 14)
                                            .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(field_nro_cliente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(field_nombre, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(field_cuil_1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(jLabel29)
                                                .addComponent(field_cuil_2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(jLabel30)
                                                .addComponent(field_cuil_3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(btn_confirmar_encabezado)
                                                .addComponent(field_punto_venta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(field_tipo_comprobante, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                .addComponent(jLabel26)
                                .addGap(33, 33, 33)))
                        .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel31)
                            .addComponent(jLabel33)
                            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                .addComponent(jLabel16)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(fecha_factura, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jLabel32)
                            .addGroup(panel_datos_facturaLayout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(field_direccion_calle, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(field_direccion_nro, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(panel_datos_facturaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(field_situacion_IVA, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addComponent(label_situacion))
                                    .addComponent(field_localidad, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel3.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jPanel3.setFocusCycleRoot(true);

        jLabel6.setText("Codigo");

        jLabel12.setText("Descripcion");

        jLabel13.setText("Cantidad");

        jTextField6.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextField6FocusLost(evt);
            }
        });
        jTextField6.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField6KeyPressed(evt);
            }
        });

        jTextField8.setNextFocusableComponent(jButton4);
        jTextField8.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextField8FocusLost(evt);
            }
        });

        jButton4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Iconos/aceptar.png"))); // NOI18N
        jButton4.setText("Confirmar");
        jButton4.setNextFocusableComponent(boton7);
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        boton7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Iconos/eliminar.png"))); // NOI18N
        boton7.setText("Borrar");
        boton7.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                boton7ActionPerformed(evt);
            }
        });

        jLabel17.setText("Precio Venta");

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, 78, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(22, 22, 22)
                        .addComponent(jLabel6)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField12)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(jLabel12, javax.swing.GroupLayout.PREFERRED_SIZE, 104, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(114, 114, 114)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, 81, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addComponent(jLabel17)
                        .addGap(12, 12, 12)))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(19, 19, 19)
                        .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(28, 28, 28)
                        .addComponent(jLabel13)))
                .addGap(45, 45, 45)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(boton7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(34, 34, 34))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel17)
                    .addComponent(jLabel12)
                    .addComponent(jLabel6)
                    .addComponent(jButton4)
                    .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 17, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jTextField12, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(17, 17, 17)
                        .addComponent(boton7, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jTable1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTable1MouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jTable1);

        jLabel2.setText("Subtotal:");

        jLabel15.setText("Total:");

        jTextField10.setEditable(false);
        jTextField10.setBackground(new java.awt.Color(255, 255, 255));

        jTextField11.setEditable(false);
        jTextField11.setBackground(new java.awt.Color(255, 255, 255));

        jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Iconos/cancelar.png"))); // NOI18N
        jButton1.setText("Cancelar");
        jButton1.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Iconos/aceptar.png"))); // NOI18N
        jButton2.setText("Guardar");
        jButton2.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jPanel1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        field_exento.setEditable(false);
        field_exento.setBackground(new java.awt.Color(255, 255, 255));

        field_impuesto_interno.setEditable(false);
        field_impuesto_interno.setBackground(new java.awt.Color(255, 255, 255));

        jLabel9.setText("Exento:");

        jLabel8.setText("No Gravado:");

        field_tasa_diferencial.setEditable(false);
        field_tasa_diferencial.setBackground(new java.awt.Color(255, 255, 255));

        field_tasa_reducida.setEditable(false);
        field_tasa_reducida.setBackground(new java.awt.Color(255, 255, 255));

        jLabel5.setText("IVA 10.5%");

        jLabel4.setText("IVA 27%");

        field_iva_general.setEditable(false);
        field_iva_general.setBackground(new java.awt.Color(255, 255, 255));

        jLabel3.setText("IVA 21%");

        jLabel10.setText("Sobretasa:");

        field_sobretasa.setEditable(false);
        field_sobretasa.setBackground(new java.awt.Color(255, 255, 255));

        jLabel7.setText("Impuesto Interno:");

        field_no_gravado.setEditable(false);
        field_no_gravado.setBackground(new java.awt.Color(255, 255, 255));

        jLabel11.setText("Total IVA:");

        field_total_iva.setEditable(false);
        field_total_iva.setBackground(new java.awt.Color(255, 255, 255));

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel9, javax.swing.GroupLayout.Alignment.TRAILING))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(field_exento)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(field_tasa_reducida)
                            .addComponent(field_tasa_diferencial, javax.swing.GroupLayout.DEFAULT_SIZE, 62, Short.MAX_VALUE)))
                    .addComponent(field_iva_general))
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(9, 9, 9)
                        .addComponent(jLabel10)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(field_sobretasa, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(jLabel8)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(field_no_gravado, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(jLabel7)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(field_impuesto_interno, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(1, 1, 1))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(49, 49, 49)
                                .addComponent(jLabel11)
                                .addGap(2, 2, 2)
                                .addComponent(field_total_iva)))))
                .addGap(138, 138, 138))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(22, 22, 22)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(field_iva_general, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel3)
                    .addComponent(jLabel11)
                    .addComponent(field_total_iva, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(field_tasa_diferencial, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel4)
                    .addComponent(field_sobretasa, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel10))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(jLabel5)
                    .addComponent(field_tasa_reducida, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(field_no_gravado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(field_impuesto_interno, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel7)
                    .addComponent(jLabel9)
                    .addComponent(field_exento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(29, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
        jPanel6.setLayout(jPanel6Layout);
        jPanel6Layout.setHorizontalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 118, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(38, 38, 38)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 123, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(43, 43, 43)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 340, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel2)
                    .addComponent(jLabel15, javax.swing.GroupLayout.Alignment.TRAILING))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField11, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTextField10, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(25, Short.MAX_VALUE))
        );
        jPanel6Layout.setVerticalGroup(
            jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel6Layout.createSequentialGroup()
                .addGap(48, 48, 48)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextField10, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2))
                .addGap(16, 16, 16)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel15)
                    .addComponent(jTextField11, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel6Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 49, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(47, 47, 47))
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        label_mensaje.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label_mensaje.setForeground(new java.awt.Color(255, 0, 0));
        label_mensaje.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        label_mensaje.setText("  ");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel6, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jScrollPane1)
            .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(panel_datos_factura, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(label_mensaje, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(panel_datos_factura, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(label_mensaje)
                .addGap(20, 20, 20)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(4, 4, 4))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
        
    
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        
        //if(jButton1.getText().equals("Cancelar")){
            int rta=JOptionPane.showConfirmDialog(null,"La factura será eliminada. ¿Desea continuar?", "Confirmar", JOptionPane.YES_NO_OPTION, JOptionPane.INFORMATION_MESSAGE);                            
            if (rta==JOptionPane.YES_OPTION){
                
                r_con.Connection();
                r_con.ActualizarSinCartel("delete from renglon_factura where rf_confirmado=0");
                r_con.ActualizarSinCartel("delete from encabezado_factura where ef_confirmado=0");                                
                this.dispose();
                r_con.cierraConexion();
            }        
        //}
       // else{
          //  this.dispose();
       //     r_con.cierraConexion();
        //}
    }//GEN-LAST:event_jButton1ActionPerformed

    
    
    private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        boton7.setEnabled(false);
        int rta=JOptionPane.showConfirmDialog(null,"La factura sera eliminada. ¿Desea continuar?", "Confirmar", JOptionPane.YES_NO_OPTION, JOptionPane.INFORMATION_MESSAGE);                            
            if (rta==JOptionPane.YES_OPTION){
                //int numAsiento=Integer.parseInt(jTextField1.getText());
                int numRenglon=1;
                modelo.removeRow(numRenglon-1);
                r_con.Connection();
                //r_con.ActualizarSinCartel("delete from borrador_asientos where ba_nro_asiento="+numAsiento);
                renombrarTabla();
            }        
            jButton4.setText("Confirmar");
    }                                        

    private void renombrarTabla(){
        for(int i=0;i<modelo.getRowCount();i++){
            int nuevoRen=i+1;
            modelo.setValueAt(nuevoRen+"", i, 0);
            //int num_asiento=Integer.parseInt(jTextField1.getText());
            //int num_cuenta=Integer.parseInt(jTextField3.getText());
            //renglon+"",num_cuenta+"",fecha_operacion,fecha_vencimiento,comprobante,leyenda,debe+"",haber+""
            float d=Float.parseFloat((String)modelo.getValueAt(i, 6));
            float h=Float.parseFloat((String)modelo.getValueAt(i, 7));
//            Asiento asiento=new Asiento(num_asiento,nuevoRen,campoFecha.getText(),(String)modelo.getValueAt(i, 2),(String)modelo.getValueAt(i, 3),getTipo(),num_cuenta,(String)modelo.getValueAt(i, 4),(String)modelo.getValueAt(i, 5),d,h,false,false);
//            asiento.insertar(r_con);
        }        
        this.actualizarSaldoDebeHaber();
        
    }
    
    public void borrarCampos(){

        jTextField6.setText("");
        jTextField7.setText("");
        jTextField8.setText("");
        jTextField7.setEnabled(true);
        jTextField8.setEnabled(true);        
    }
    
    private void borrarCamposAstoBasicos(){
        jTextField6.setText("");
        jTextField12.setText("");
        jTextField7.setText("");
        jTextField8.setText("");
        jTextField7.setEnabled(true);
        jTextField8.setEnabled(true); 
    }
    
   private int getIdNuevoEncabezadoFactura(){
       r_con.Connection();
       int id=-1;
       try{
       ResultSet rs=r_con.Consultar("select max(ef_encabezado_factura_id) from encabezado_factura");
       if(rs.next()){
           id=rs.getInt(1);           
       }
       id++;
       }
       catch(Exception e){r_con.cierraConexion();}       
       r_con.cierraConexion();             
       return id;
   }
    
    
    private void btn_confirmar_encabezadoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_confirmar_encabezadoActionPerformed
        int idFactura=getIdNuevoEncabezadoFactura();  
        r_con.Connection();
        int tipoComprobante=Integer.parseInt(field_tipo_comprobante.getText());
        int puntoVenta=Integer.parseInt(field_punto_venta.getText()); 
        int numCliente=Integer.parseInt(field_nro_cliente.getText());       
        String fec=fecha_factura.getText();                
        String sql="insert into encabezado_factura values("+idFactura+","+tipoComprobante+","+puntoVenta+","+
                "(select max(vxc_numero)+1 from ptoventa_x_tipocomprobante where vxc_id_pto_venta="+puntoVenta+" and vxc_id_tipo_comprobante="+tipoComprobante+"),"+
                "(select pf_numero_control+1 from parametros_facturacion),'"+numCliente+"','"+fec+"',0,0,0,0,0,0,0,0,0,0)";
        
        r_con.InsertarSinCartel(sql);        
        r_con.ActualizarSinCartel("update parametros_facturacion set pf_numero_control=(select pf_numero_control+1 from parametros_facturacion)");
        ResultSet rs=r_con.Consultar("select pf_numero_control from parametros_facturacion");
        try{
        if(rs.next())
            numeroControl=rs.getInt(1);
        }catch(Exception e){}
        btn_confirmar_encabezado.setEnabled(false);
        r_con.cierraConexion();
        jButton2.setEnabled(true);                    
        habilitarPanel1(false);
        habilitarPanel2(true);       
        jTable1.setEnabled(true);
    }//GEN-LAST:event_btn_confirmar_encabezadoActionPerformed

    private void jTextField8FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField8FocusLost

    }//GEN-LAST:event_jTextField8FocusLost

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        // TODO add your handling code here:
        
        String ivaGeneral=field_iva_general.getText();
        String tasaDiferencial=field_tasa_diferencial.getText();
        String tasaReducida=field_tasa_reducida.getText();
        String exento=field_exento.getText();
        String sobretasa=field_sobretasa.getText();
        String noGravado=field_no_gravado.getText();
        String total=jTextField10.getText();
        String subtotal=jTextField11.getText();
        String impuestoInterno=field_impuesto_interno.getText();
        r_con.Connection();
        r_con.ActualizarSinCartel("update encabezado_factura set ef_iva_general="+ivaGeneral+",ef_tasa_diferencial="+tasaDiferencial+",ef_sobretasa="+sobretasa+",ef_exento="+exento+",ef_tasa_reducida="+tasaReducida+",ef_no_gravado="+noGravado+",ef_impuesto_interno="+impuestoInterno+",ef_subtotal="+subtotal+",ef_total="+total+",ef_confirmado=1 where ef_encabezado_factura_id="+numeroControl);
        r_con.ActualizarSinCartel("update renglon_factura set rf_confirmado=1 where rf_encabezado_factura_id="+numeroControl);
        int ptoVenta=Integer.parseInt(field_punto_venta.getText());
        int tipoComprobante=Integer.parseInt(field_tipo_comprobante.getText());
        r_con.ActualizarSinCartel("update ptoventa_x_tipocomprobante set vxc_numero=(select vxc_numero+1 from ptoventa_x_tipocomprobante where vxc_id_pto_venta="+ptoVenta+" and vxc_id_tipo_comprobante="+tipoComprobante+") where vxc_id_pto_venta="+ptoVenta+" and vxc_id_tipo_comprobante="+tipoComprobante);
        this.inicializarTabla();
        this.inicializarIvas();
        this.vaciar_panel_datos();
        this.habilitarPanel1(true);
        this.habilitarPanel2(false);
        label_mensaje.setForeground(Color.green);
        label_mensaje.setText("La factura fue cargada correctamente");
        
        renglon=0;
        r_con.cierraConexion();
    }//GEN-LAST:event_jButton2ActionPerformed


    
    private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTable1MouseClicked
        // TODO add your handling code here:        
        if(jTable1.isEnabled()){
            if(evt.getClickCount()==2){            
                int fila=jTable1.getSelectedRow();
            //"Renglon","Nro. Cuenta","Fecha Oper.","Fecha Vto.","Nro Comprobante","Leyenda","Debe","Haber"
                modificar=fila;                               
                String codProducto=(String)modelo.getValueAt(fila,0);
                String cantidad=(String)modelo.getValueAt(fila, 2);
                String leyenda=(String)modelo.getValueAt(fila, 1);
                BigDecimal precioVenta=convertirEnBigDecimal((String)modelo.getValueAt(fila, 3));                
                jTextField6.setText(codProducto);
                jTextField12.setText(leyenda);
                jTextField7.setText(precioVenta+"");
                jTextField8.setText(cantidad);            
                BigDecimal iva=calcularIva(jTextField6);
                habilitarPanel2(true);
                boton7.setEnabled(true);
                jButton4.setText("Modificar");
            }               
        }
    }//GEN-LAST:event_jTable1MouseClicked

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
    
        if(jButton4.getText().equals("Confirmar")){
            if(controlarCampos()){
                jButton2.setEnabled(true);
                jButton1.setText("Abandonar Factura");
                cargarTabla();                
                borrarCamposAstoBasicos();
                mensajeError(" ");
            }
            else
            {
                mensajeError("Debe completar todos los campos");
            }
        }
        else
        {
            if(controlarCampos()){
                jButton4.setText("Confirmar");
                actualizarTabla();
                mensajeError(" ");
                borrarCamposAstoBasicos();                
            }
            else
                mensajeError("Debe completar todos los campos");
        }
    }//GEN-LAST:event_jButton4ActionPerformed

    private void boton7ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_boton7ActionPerformed
        // TODO add your handling code here:
        boton7.setEnabled(false);
        int rta=JOptionPane.showConfirmDialog(null,"El renglon sera eliminado. ¿Desea continuar?", "Confirmar", JOptionPane.YES_NO_OPTION, JOptionPane.INFORMATION_MESSAGE);                            
            if (rta==JOptionPane.YES_OPTION){
                
                int numRenglon=1;
                modelo.removeRow(numRenglon-1);
                r_con.Connection();
                
                renombrarTabla();
            }
            else
                boton7.setEnabled(true);
            jButton4.setText("Confirmar");
    }//GEN-LAST:event_boton7ActionPerformed

    private void field_tipo_comprobanteFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_field_tipo_comprobanteFocusLost
        boolean es_componente=false;
        //voy a preguntar si la componente que me saco el foco es algun campo del panel de datos de asientos
        if (evt.getOppositeComponent()!=fecha_factura){
            int i=0;        
            Component[] components = panel_datos_factura.getComponents();
            while ((!es_componente)&&(i<components.length)){
                if (components[i]==evt.getOppositeComponent()){
                    es_componente=true;
                }
                i++;
            }

            if((es_componente)&&(field_tipo_comprobante.isEditable())){        
                if (!field_tipo_comprobante.getText().equals("")){
                    String detalle = get_TipoComprobante(field_tipo_comprobante.getText());
                    if (!detalle.equals("")){
                        label_tipo_comprobante.setText(detalle+" Nº: ");
                        mensajeError(" ");
                    }
                    else{
                        field_tipo_comprobante.requestFocus();
                        label_tipo_comprobante.setText("TIPO COMPROBANTE:");
                        generarAyuda_Tipo_Comprobante();
                    }
                }
                else{
                    label_tipo_comprobante.setText("TIPO COMPROBANTE:");
                    mensajeError("Por favor, seleccione un tipo de comprobante");
                }
            }
        }        
    }//GEN-LAST:event_field_tipo_comprobanteFocusLost
    
    private void field_punto_ventaFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_field_punto_ventaFocusLost
        // TODO add your handling code here:
        boolean es_componente=false;
        if (evt.getOppositeComponent()!=field_tipo_comprobante){
            //voy a preguntar si la componente que me saco el foco es algun campo del panel de datos de asientos
            int i=0;        
            Component[] components = panel_datos_factura.getComponents();
            while ((!es_componente)&&(i<components.length)){
                if (components[i]==evt.getOppositeComponent()){
                    es_componente=true;
                }
                i++;
            }

            if((es_componente)&&(!field_punto_venta.getText().equals(""))){
                if (isPuntoVenta(field_punto_venta.getText())){
                    String detalle = get_NumeroComprobante(field_punto_venta.getText(),field_tipo_comprobante.getText());
                    if (!detalle.equals("")){
                        String numero_com="00";
                        String numero_pto="0000";
                        if ((!field_tipo_comprobante.getText().equals(""))&&(!field_punto_venta.getText().equals(""))){
                            numero_com = String.format("%02d", Integer.parseInt(field_tipo_comprobante.getText()));
                            numero_pto = String.format("%04d", Integer.parseInt(field_punto_venta.getText()));
                        }                
                        String numero_fac = String.format("%08d", Integer.parseInt(detalle));
                        label_numero_factura.setText(numero_com+"-"+numero_pto+"-"+numero_fac);
                        mensajeError(" ");
                    }
                    else{
                        label_numero_factura.setText(" ");
                        field_punto_venta.requestFocus();
                        mensajeError("El tipo de comprobante "+field_tipo_comprobante.getText()+" no esta disponible para el punto de venta "+field_punto_venta.getText());
                    }
                }
                else {
                    field_punto_venta.requestFocus();
                    generarAyuda_Punto_Venta();   
                }
            }
            else{
                label_numero_factura.setText(" ");
                mensajeError("Por favor, seleccione un punto de venta");
            }
        }
    }//GEN-LAST:event_field_punto_ventaFocusLost

    private void field_tipo_comprobanteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_field_tipo_comprobanteKeyPressed
        // TODO add your handling code here:
        if (evt.getKeyCode() == KeyEvent.VK_F1){            
            generarAyuda_Tipo_Comprobante();
        }
    }//GEN-LAST:event_field_tipo_comprobanteKeyPressed

    private void field_punto_ventaKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_field_punto_ventaKeyPressed
        // TODO add your handling code here:
         if (evt.getKeyCode() == KeyEvent.VK_F1){            
            generarAyuda_Punto_Venta();
        }
    }//GEN-LAST:event_field_punto_ventaKeyPressed

    private void fecha_facturaFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_fecha_facturaFocusLost
        habilitarConfirmar1();
        boolean es_componente=false;
        if (evt.getOppositeComponent() != field_nro_cliente){
            //voy a preguntar si la componente que me saco el foco es algun campo del panel de datos de asientos
            int i=0;        
            Component[] components = panel_datos_factura.getComponents();
            while ((!es_componente)&&(i<components.length)){
                if (components[i]==evt.getOppositeComponent()){
                    es_componente=true;
                }
                i++;
            }

            if (es_componente){
                if (!fecha.isFechaValida(fecha_factura.getText())){
                    fecha_factura.requestFocus();    
                    mensajeError("La Fecha ingresada no se reconoce como valida.");    
                }
                else{
                    mensajeError(" ");
                }
            }
            try{
                r_con.Connection();
                String fechaFacturacion="";
                ResultSet rs=r_con.Consultar("select pf_fecha_ultima_factura from parametros_facturacion");
                if(rs.next())
                    fechaFacturacion=rs.getString("pf_fecha_ultima_factura");
                fechaFacturacion=fecha.convertirBarras(fechaFacturacion);
                if(fecha.menorFechas(fecha_factura.getText(),fechaFacturacion)==2){
                    btn_confirmar_encabezado.setEnabled(true);
                    btn_confirmar_encabezado.requestFocus();
                }
                else{
                    mensajeError("La Fecha ingresada debe ser superior a la fecha de la ultima factura: "+fechaFacturacion);    
                }
            }
            catch(Exception e){
            r_con.cierraConexion();
            }
            r_con.cierraConexion();
        }
    }//GEN-LAST:event_fecha_facturaFocusLost

    private void field_nro_clienteFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_field_nro_clienteFocusLost
        // TODO add your handling code here:
        habilitarConfirmar1();
        boolean es_componente=false;
        if (evt.getOppositeComponent()!= field_punto_venta){
            //voy a preguntar si la componente que me saco el foco es algun campo del panel de datos de asientos
            int i=0;        
            Component[] components = panel_datos_factura.getComponents();
            while ((!es_componente)&&(i<components.length)){
                if (components[i]==evt.getOppositeComponent()){
                    es_componente=true;
                }
                i++;
            }
            if((es_componente)){
                if (!field_nro_cliente.getText().equals("")){
                    Cliente cli = get_Cliente (field_nro_cliente.getText());
                    if (cli.getCodigo_cliente()!=0){
                        if ((!field_tipo_comprobante.equals(""))&&(validar_Comprobante_Cliente (cli,field_tipo_comprobante.getText()))) {
                            cliente_factura = cli;
                            field_nombre.setText(cli.getNombre_cliente()+" "+cli.getApellido_cliente());
                            field_cuil_1.setText(cli.getCuil_prefijo_cliente());
                            field_cuil_2.setText(cli.getCuil_dni_cliente());
                            field_cuil_3.setText(cli.getCuil_digito_cliente());
                            field_direccion_calle.setText(cli.getCalle_cliente());
                            field_direccion_nro.setText(cli.getNumero_calle_cliente());
                            field_localidad.setText(cli.getLocalidad_cliente());
                            field_situacion_IVA.setText(""+cli.getCodigo_situacion_IVA_cliente());
                            label_situacion.setText(cli.getDescripcion_situacion_IVA_cliente());               
                            mensajeError(" ");
                        }
                        else{
                            field_nro_cliente.requestFocus();
                            mensajeError("El tipo de comprobante seleccionado no esta permitido para la situacion frente al IVA del Cliente");
                        }
                    }
                    else{
                        vaciar_cliente ();
                        field_nro_cliente.requestFocus();
                        generarAyuda_Cliente();      
                    }
                }
                else{
                    vaciar_cliente ();
                    field_nro_cliente.requestFocus();
                    mensajeError("Por favor, ingrese un cliente");
                }
            }
        }
    }//GEN-LAST:event_field_nro_clienteFocusLost

    private void jTextField6KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField6KeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_F1){            
           generarAyuda_Producto();
        }        
    }//GEN-LAST:event_jTextField6KeyPressed

    private void jTextField6FocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextField6FocusLost
        r_con.Connection();
        try{
            ResultSet rs=r_con.Consultar("select * from productos where prod_codigo="+jTextField6.getText());
            if(rs.next()){
                jTextField12.setText(rs.getString(2));
                jTextField7.setText(rs.getString(5));                
            }
            else{
                jTextField6.requestFocus();
            }
        }
        catch(Exception e){}
        
    }//GEN-LAST:event_jTextField6FocusLost

    private void field_nro_clienteKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_field_nro_clienteKeyPressed
     if (evt.getKeyCode() == KeyEvent.VK_F1){            
            generarAyuda_Cliente();
        }        
    }//GEN-LAST:event_field_nro_clienteKeyPressed
    
    public void generarAyuda_Producto(){
        GUI_Ayuda_Producto np=new GUI_Ayuda_Producto(r_con,this);
        //lo centro respecto a x
        int x = (this.getDesktopPane().getWidth() / 2) - np.getWidth() / 2;
        int y = (this.getDesktopPane().getHeight() / 2) - np.getHeight() / 2;
        np.setLocation(x, y);        
        //lo hago visible, lo agrego al DesktopPanel, hago foco.
        np.setVisible(true);
        this.getDesktopPane().add(np);
        try {                
            np.setSelected(true);            
         } 
        catch (PropertyVetoException ex) {
            Logger.getLogger(IGUI_Clientes.class.getName()).log(Level.SEVERE, null, ex);
        }
        np.moveToFront();
        np.requestFocus();         
    }
    
    private boolean validar_Comprobante_Cliente (Cliente cli, String codigo_comprobante){
        boolean existe = false;
        try {
            r_con.Connection();
            String sql = (
                        "SELECT * "+
                        " FROM situacion_x_tipocomprobante "+
                        " WHERE sfi_id = "+cli.getCodigo_situacion_IVA_cliente()+" AND tc_codigo = "+codigo_comprobante);           
            
            ResultSet res = r_con.Consultar(sql);
            
            while(res.next()){
                existe = true;
            }
            res.close();
        } catch (SQLException ex) {
            Logger.getLogger(IGUI_Productos.class.getName()).log(Level.SEVERE, null, ex);
        } finally {            
            r_con.cierraConexion();
        }
        return existe;
    
    }
    
    private void vaciar_cliente (){
        field_nombre.setText("");
        field_cuil_1.setText("");
        field_cuil_2.setText("");
        field_cuil_3.setText("");
        field_direccion_calle.setText("");
        field_direccion_nro.setText("");
        field_localidad.setText("");
        field_situacion_IVA.setText("");
        label_situacion.setText(" ");
    }
    
    private String get_TipoComprobante (String codigo){
        String detalle = "";
        try {            
            r_con.Connection();
            String sql = ( "SELECT * "+
                    " FROM tipo_comprobante"+
                    " WHERE tc_codigo = "+codigo);
            
            ResultSet res = r_con.Consultar(sql);
            while(res.next()){
                detalle = res.getString(2);
            }
            res.close();           
        } catch (SQLException ex) {
            Logger.getLogger(IGUI_Facturar.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
                    r_con.cierraConexion();
                  }
        return detalle;
    }
    
    private String get_NumeroComprobante (String pto, String codigo){
        String detalle = "";
        try {            
            r_con.Connection();
            String sql = ( "SELECT * "+
                    " FROM ptoventa_x_tipocomprobante"+
                    " WHERE vxc_id_pto_venta = "+pto+" AND vxc_id_tipo_comprobante = "+codigo);
            
            ResultSet res = r_con.Consultar(sql);
            while(res.next()){
                detalle = res.getString(3);
            }
            res.close();           
        } catch (SQLException ex) {
            Logger.getLogger(IGUI_Facturar.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
                    r_con.cierraConexion();
                  }
        return detalle;
    }
    
    private boolean isPuntoVenta (String codigo){
        boolean existe = false;
        try {
            r_con.Connection();
            String sql = (
                        "SELECT * "+
                        " FROM punto_venta"+
                        " WHERE pv_codigo = "+codigo);           
            
            ResultSet res = r_con.Consultar(sql);
            
            while(res.next()){
                existe = true;
            }
            res.close();
        } catch (SQLException ex) {
            Logger.getLogger(IGUI_Productos.class.getName()).log(Level.SEVERE, null, ex);
        } finally {            
            r_con.cierraConexion();
        }
        return existe;
    }
    
    private Cliente get_Cliente (String codigo){
        String detalle = "";
        Cliente cli = new Cliente();
        try {            
            r_con.Connection();
            String sql = ( "SELECT cli_codigo, cli_nombre, cli_apellido, cli_fecha_nac, cli_cuit, loc_descripcion, cli_direccion, cli_calle, cli_sit_frente_iva, sfi_descripcion " +
                           "FROM clientes, localidades, situacion_frente_iva " +
                           "WHERE (cli_codigo = "+codigo+") AND (cli_localidad = loc_id) AND (cli_sit_frente_iva = sfi_id)");
            
            ResultSet res = r_con.Consultar(sql);           
            
            while(res.next()){
                cli.setCodigo_cliente(Integer.parseInt(res.getString(1)));
                cli.setNombre_cliente(res.getString(2));
                cli.setApellido_cliente(res.getString(3));
                
                String fechaAux=res.getString(4);
                if((fechaAux!=null)&&(!fechaAux.equals("")))
                    fechaAux = fecha.convertirBarras(res.getString(4));                
                else
                    fechaAux="";
                cli.setFecha_nacimiento_cliente(fechaAux);
                
                String cuil = res.getString(5);
                if((cuil!=null)&&(!cuil.equals(""))){
                    cli.setCuil_prefijo_cliente(cuil.substring(0,2));
                    cli.setCuil_dni_cliente(cuil.substring(2,cuil.length()-1));
                    cli.setCuil_digito_cliente(cuil.substring(cuil.length()-1,cuil.length()));
                }
                else{
                    cli.setCuil_prefijo_cliente("");
                    cli.setCuil_dni_cliente("");
                    cli.setCuil_digito_cliente("");
                }
                
                cli.setLocalidad_cliente(res.getString(6));
                cli.setCalle_cliente(res.getString(7));
                cli.setNumero_calle_cliente(res.getString(8));
                cli.setCodigo_situacion_IVA_cliente(Integer.parseInt(res.getString(9)));
                cli.setDescripcion_situacion_IVA_cliente(res.getString(10));
            }
            res.close();           
        } catch (SQLException ex) {
            Logger.getLogger(IGUI_Facturar.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
                    r_con.cierraConexion();
                  }
        //System.out.println(cli.toString());
        return cli;
    }
    
    public void generarAyuda_Tipo_Comprobante(){
        GUI_Ayuda_Tipo_Comprobante np = new GUI_Ayuda_Tipo_Comprobante(r_con,this);
        //lo centro respecto a x
        int x = (this.getDesktopPane().getWidth() / 2) - np.getWidth() / 2;
        int y = (this.getDesktopPane().getHeight() / 2) - np.getHeight() / 2;
        np.setLocation(x, y);        
        //lo hago visible, lo agrego al DesktopPanel, hago foco.
        np.setVisible(true);
        this.getDesktopPane().add(np);
        try {                
            np.setSelected(true);            
         } 
        catch (PropertyVetoException ex) {
            Logger.getLogger(IGUI_Productos.class.getName()).log(Level.SEVERE, null, ex);
        }
        np.moveToFront();
        np.requestFocus();         
    }
    
     public void generarAyuda_Punto_Venta(){
        GUI_Ayuda_Punto_Venta np = new GUI_Ayuda_Punto_Venta(r_con,this);
        //lo centro respecto a x
        int x = (this.getDesktopPane().getWidth() / 2) - np.getWidth() / 2;
        int y = (this.getDesktopPane().getHeight() / 2) - np.getHeight() / 2;
        np.setLocation(x, y);        
        //lo hago visible, lo agrego al DesktopPanel, hago foco.
        np.setVisible(true);
        this.getDesktopPane().add(np);
        try {                
            np.setSelected(true);            
         } 
        catch (PropertyVetoException ex) {
            Logger.getLogger(IGUI_Productos.class.getName()).log(Level.SEVERE, null, ex);
        }
        np.moveToFront();
        np.requestFocus();         
    }
     
     public void generarAyuda_Cliente(){
        GUI_Ayuda_Cliente np = new GUI_Ayuda_Cliente(r_con,this);
        //lo centro respecto a x
        int x = (this.getDesktopPane().getWidth() / 2) - np.getWidth() / 2;
        int y = (this.getDesktopPane().getHeight() / 2) - np.getHeight() / 2;
        np.setLocation(x, y);        
        //lo hago visible, lo agrego al DesktopPanel, hago foco.
        np.setVisible(true);
        this.getDesktopPane().add(np);
        try {                
            np.setSelected(true);            
         } 
        catch (PropertyVetoException ex) {
            Logger.getLogger(IGUI_Productos.class.getName()).log(Level.SEVERE, null, ex);
        }
        np.moveToFront();
        np.requestFocus();         
    }
    
    private void actualizarTabla(){
        if(modificar!=-1){            
            int numRenglon=modificar;            
            System.out.println(modificar);
            //int ren=modificar;
            modelo.setValueAt(jTextField6.getText(),numRenglon , 0);
            modelo.setValueAt(jTextField12.getText(),numRenglon , 1);
            BigDecimal precioVenta=convertirEnBigDecimal(jTextField7.getText());
            modelo.setValueAt(precioVenta.floatValue()+"",numRenglon , 2);
            int cantidad=Integer.parseInt(jTextField8.getText());
            modelo.setValueAt(cantidad,numRenglon , 3);            
            BigDecimal importe=precioVenta.multiply(new BigDecimal(cantidad));
            BigDecimal iva=calcularIva(jTextField6.getText(),importe);
            
            modelo.setValueAt(importe.floatValue()+"",numRenglon , 4);

            r_con.Connection();

            this.actualizarTotal();            
            this.actualizarIvas(jTextField6.getText(), iva, importe, modificar, new BigDecimal(cantidad));
            modificar=-1;
        }
    }
    
    

    
    private void cargarCampos(int numAsiento){
        try {
            r_con.Connection();
            ResultSet rs=r_con.Consultar("select * from borrador_asientos where ba_nro_asiento="+numAsiento);
            Asiento asiento=null;
            renglon=0;
            BigDecimal debeTotal=new BigDecimal(0);
            BigDecimal haberTotal=new BigDecimal(0);
            while(rs.next()){
                renglon++;
                    asiento=new Asiento(rs.getInt(1),rs.getInt(2),rs.getDate(3).toString(),
                                            rs.getDate(6).toString(),rs.getDate(7).toString(),
                                            rs.getString(4),rs.getInt(5),rs.getString(8),
                                            rs.getString(9),rs.getFloat(10),rs.getFloat(11),
                                            rs.getBoolean(12),rs.getBoolean(13));
                modelo.addRow(asiento.getRenglonModelo());
                jTable1.setModel(modelo);           
                BigDecimal asDebe=convertirEnBigDecimal(asiento.getDebe()+"");
                debeTotal=sumarBigDecimal(debeTotal+"",asDebe+"");
                BigDecimal asHaber=convertirEnBigDecimal(asiento.getHaber()+"");
                haberTotal=sumarBigDecimal(haberTotal+"",asHaber+"");
            }

            jTextField11.setText(haberTotal+"");
            BigDecimal saldo=sumarBigDecimal(debeTotal+"","-"+haberTotal);
            jTextField10.setText(saldo+"");
            if(asiento!=null){                                                             
                //campoFecha.setText(fecha.convertirBarras(asiento.getFecha_contable()));                
                
                if(asiento.getTipo().equals("Asiento Apertura")){
                    //jRadioButton1.setSelected(true);
                }
                else{
                    if(asiento.getTipo().equals("Asiento Normal")){
                        //jRadioButton2.setSelected(true);
                    }
                    else{
                        //jRadioButton3.setSelected(true);
                    }                        
                }
            }
            r_con.cierraConexion();
        } catch (SQLException ex) {
            r_con.cierraConexion();
            Logger.getLogger(GUI_Cargar_Asiento.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    
        
   
    
    private void habilitarPanel1(boolean valor){
        field_nombre.setFocusable(false);
        field_cuil_1.setFocusable(false);
        field_cuil_2.setFocusable(false);
        field_cuil_3.setFocusable(false);
        field_direccion_calle.setFocusable(false);
        field_direccion_nro.setFocusable(false);
        field_localidad.setFocusable(false);
        field_situacion_IVA.setFocusable(false);
        field_tipo_comprobante.setFocusable(valor);
        field_tipo_comprobante.setEditable(valor);        
        field_punto_venta.setFocusable(valor);
        field_punto_venta.setEditable(valor);
        field_nro_cliente.setFocusable(valor);
        field_nro_cliente.setEditable(valor);
        fecha_factura.setFocusable(valor);
        fecha_factura.setEditable(valor);
        //btn_confirmar_encabezado.setEnabled(valor);        
    }
    
    private void habilitarPanel2(boolean valor){        
        jTextField12.setFocusable(false);
        jTextField7.setFocusable(false);
        jTextField6.setEnabled(valor);      
        jTextField8.setEnabled(valor);
        jTextField12.setEnabled(valor);
        jTextField7.setEnabled(valor);
        jTextField7.setEditable(false);
        jTextField12.setEditable(false);
        boton7.setEnabled(valor);
        jButton4.setEnabled(valor);
    }
    
 

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton boton7;
    private javax.swing.JButton btn_confirmar_encabezado;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JFormattedTextField fecha_factura;
    private javax.swing.JTextField field_cuil_1;
    private javax.swing.JTextField field_cuil_2;
    private javax.swing.JTextField field_cuil_3;
    private javax.swing.JTextField field_direccion_calle;
    private javax.swing.JTextField field_direccion_nro;
    private javax.swing.JTextField field_exento;
    private javax.swing.JTextField field_impuesto_interno;
    private javax.swing.JTextField field_iva_general;
    private javax.swing.JTextField field_localidad;
    private javax.swing.JTextField field_no_gravado;
    private javax.swing.JTextField field_nombre;
    private javax.swing.JTextField field_nro_cliente;
    private javax.swing.JTextField field_punto_venta;
    private javax.swing.JTextField field_situacion_IVA;
    private javax.swing.JTextField field_sobretasa;
    private javax.swing.JTextField field_tasa_diferencial;
    private javax.swing.JTextField field_tasa_reducida;
    private javax.swing.JTextField field_tipo_comprobante;
    private javax.swing.JTextField field_total_iva;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton4;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel31;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel33;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextField jTextField10;
    private javax.swing.JTextField jTextField11;
    private javax.swing.JTextField jTextField12;
    private javax.swing.JTextField jTextField6;
    private javax.swing.JTextField jTextField7;
    private javax.swing.JTextField jTextField8;
    private javax.swing.JLabel label_mensaje;
    private javax.swing.JLabel label_numero_factura;
    private javax.swing.JLabel label_situacion;
    private javax.swing.JLabel label_tipo_comprobante;
    private javax.swing.JPanel panel_datos_factura;
    // End of variables declaration//GEN-END:variables


    private void inicializarTabla() {        
        modelo=new DefaultTableModelAsientos();
        String [] columnas= {"Codigo Producto","Descripcion","Cantidad","Precio","Importe"};
        modelo.setColumnIdentifiers(columnas); 
        jTable1.setModel(modelo);        
    }

    private void mensajeError(String msj) {
        label_mensaje.setForeground(Color.red);
        label_mensaje.setText(msj);        
    }
    
    /**
     * Nos retorna el numero del tipo, segun el radio button seleccionado
     * @return 
     */
    private String getTipo(){

        return "";
    }
    
    private void cargarTabla(){
        String leyenda=jTextField12.getText();        
        BigDecimal precioVenta=new BigDecimal(0);        
        float d=Float.parseFloat(jTextField7.getText());
        precioVenta=convertirEnBigDecimal(d+"");
        int cantidad=Integer.parseInt(jTextField8.getText());        
        String cod_prod=jTextField6.getText();                              
        BigDecimal subSinIva=precioVenta.multiply(new BigDecimal(cantidad));                                
        String pre_venta=jTextField7.getText();        
        BigDecimal iva=calcularIva(cod_prod,subSinIva);
        
        r_con.Connection();
        BigDecimal sub=analizarTipoCliente(cod_prod,iva,subSinIva,new BigDecimal(cantidad));
        String sql="insert into renglon_factura values("+numeroControl+","+renglon+","+cod_prod+","+cantidad+",0,0,0,0,0,0,0,"+sub+",0)";
        r_con.InsertarSinCartel(sql);
        actualizarIvas(cod_prod,iva,subSinIva,renglon,new BigDecimal(cantidad));
        
        BigDecimal impInterno=calcularImpInterno(cod_prod,subSinIva,new BigDecimal(cantidad));
        BigDecimal anterior=convertirEnBigDecimal(field_impuesto_interno.getText());
        anterior=sumarBigDecimal(anterior+"",impInterno+"");
        field_impuesto_interno.setText(anterior+"");
        
        String []aux_modelo={cod_prod,leyenda,cantidad+"",pre_venta,sub+""};
        modelo.addRow(aux_modelo);  
        actualizarTotal();
        jTable1.setModel(modelo);
        
        renglon++;
    }
    
    private BigDecimal calcularImpInterno(String codProducto,BigDecimal sub,BigDecimal cantidad){
        r_con.Connection();
        ResultSet rs=r_con.Consultar("select prod_impuesto_porcentaje,prod_impuesto_valor from productos where prod_codigo="+codProducto);
        BigDecimal impuestoInterno=new BigDecimal(0);
        try{
            if(rs.next()){
                if(rs.getFloat(1)!=0){
                    impuestoInterno=sub.multiply(new BigDecimal(rs.getFloat(1))).divide(new BigDecimal(100));
                }
                if(rs.getFloat(2)!=0){
                    impuestoInterno=cantidad.multiply(new BigDecimal(rs.getFloat(2)));
                }
           
            }        
            /*BigDecimal anterior=convertirEnBigDecimal(field_impuesto_interno.getText());
            anterior=sumarBigDecimal(anterior+"",impuestoInterno+"");
            field_impuesto_interno.setText(anterior+"");
            */
        }
        catch(Exception e){}
        return impuestoInterno;
    }
    
    
    private BigDecimal analizarTipoCliente(String codProducto,BigDecimal iva,BigDecimal sub,BigDecimal cantidad){
        int sitFrenteIva=Integer.parseInt(field_situacion_IVA.getText());        
        BigDecimal impuestoInterno=calcularImpInterno(codProducto,sub,cantidad);
                
        if(sitFrenteIva==6){ //MONOTRIBUTISTA
            sub=sumarBigDecimal(iva+"",sub+"");            
            sub=sumarBigDecimal(sub+"",impuestoInterno+"");   
        }
        
    return sub;
    }
    
    private void actualizarTotal(){
        BigDecimal subtotal=new BigDecimal(0);
        for(int i=0;i<jTable1.getModel().getRowCount();i++){
            subtotal=this.sumarBigDecimal(subtotal+"", convertirEnBigDecimal(modelo.getValueAt(i,4).toString())+"");
        }
        int sitFrenteIva=Integer.parseInt(field_situacion_IVA.getText());
        BigDecimal total=new BigDecimal(0);        
        if(sitFrenteIva==1){  // si es RESPONSABLE INSCRIPTO                      
            BigDecimal totalIva=new BigDecimal(0);
            totalIva=this.sumarBigDecimal(totalIva+"", field_iva_general.getText());
            totalIva=this.sumarBigDecimal(totalIva+"", field_tasa_diferencial.getText());
            totalIva=this.sumarBigDecimal(totalIva+"", field_tasa_reducida.getText());            
            field_total_iva.setText(totalIva.floatValue()+"");
            
            total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_exento.getText())+"");
            total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_no_gravado.getText())+"");
            total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_total_iva.getText())+"");            
            //total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_iva_general.getText())+"");
            //total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_tasa_diferencial.getText())+"");
            //total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_tasa_reducida.getText())+"");
            total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_sobretasa.getText())+"");
            total=this.sumarBigDecimal(total+"", convertirEnBigDecimal(field_impuesto_interno.getText())+"");                        
        }
        jTextField11.setText(total+"");
        jTextField10.setText(subtotal+"");        
    }
    
    private void actualizarIvas(String codProducto, BigDecimal iva,BigDecimal sub,int reng,BigDecimal cantidad){
        r_con.Connection();
        ResultSet rs=r_con.Consultar("select prod_tasa_iva from productos where prod_codigo="+codProducto);
        try{
        if(rs.next()){
            String tipoIva=rs.getString(1);
            if((tipoIva.equals("00"))||(tipoIva.equals("0"))){
                BigDecimal ex=convertirEnBigDecimal(field_exento.getText());
                ex=this.sumarBigDecimal(ex+"", sub+"");
                field_exento.setText(ex+"");
                r_con.ActualizarSinCartel("update renglon_factura set rf_exento="+iva+" where rf_encabezado_factura_id="+numeroControl+" and rf_num_renglon="+reng);
            }
            if((tipoIva.equals("01"))||(tipoIva.equals("1"))){
                BigDecimal aux=convertirEnBigDecimal(field_iva_general.getText());
                aux=this.sumarBigDecimal(aux+"", iva+"");
                field_iva_general.setText(aux+"");
                r_con.ActualizarSinCartel("update renglon_factura set rf_iva_general="+iva+" where rf_encabezado_factura_id="+numeroControl+" and rf_num_renglon="+reng);
            }     
           if((tipoIva.equals("02"))||(tipoIva.equals("2"))){
                BigDecimal aux=convertirEnBigDecimal(field_tasa_diferencial.getText());
                aux=this.sumarBigDecimal(aux+"", iva+"");
                field_tasa_diferencial.setText(aux+"");
                r_con.ActualizarSinCartel("update renglon_factura set rf_tasa_diferencial="+iva+" where rf_encabezado_factura_id="+numeroControl+" and rf_num_renglon="+reng);
           }
           if((tipoIva.equals("03"))||(tipoIva.equals("3"))){
                BigDecimal aux=convertirEnBigDecimal(field_tasa_reducida.getText());
                aux=this.sumarBigDecimal(aux+"", iva+"");
                field_tasa_reducida.setText(aux+"");
                r_con.ActualizarSinCartel("update renglon_factura set rf_tasa_reducida="+iva+" where rf_encabezado_factura_id="+numeroControl+" and rf_num_renglon="+reng);
           }                      
        
            if((!tipoIva.equals("00"))&&(!tipoIva.equals("0"))){
                BigDecimal aux=convertirEnBigDecimal(field_no_gravado.getText());
                aux=this.sumarBigDecimal(aux+"", sub+"");
                field_no_gravado.setText(aux+"");
                BigDecimal impInterno=calcularImpInterno(codProducto,sub,cantidad);
                r_con.ActualizarSinCartel("update renglon_factura set rf_no_gravado="+sub+",rf_impuesto_interno="+impInterno.floatValue()+" where rf_encabezado_factura_id="+numeroControl+" and rf_num_renglon="+reng);
            }
            }
        }catch(Exception e){r_con.cierraConexion();}
        r_con.cierraConexion();
    }
    
    
    /**
     * Calcula el IVA segun el Tipo de Tasa de Iva del importe pasado por parametro
     * @param codigo_prod Codigo del Producto 
     * @param importe 
     * @return 
     */
    private BigDecimal calcularIva(String codigo_prod,BigDecimal importe){
        r_con.Connection();
        BigDecimal bigAux=new BigDecimal(0);
        try{        
            float iva=0;                  
            ResultSet rs=r_con.Consultar("select tasa_tasa " +
                                         "from tasas_iva,productos "+
                                         "where tasa_tipo=prod_tasa_iva and prod_codigo="+codigo_prod+" and ('"+fecha_factura.getText()+"' between tasa_desde and tasa_hasta)");      
            if(rs.next()){
                iva=rs.getFloat(1);
            }        
            bigAux=importe.multiply(new BigDecimal(iva)).divide(new BigDecimal(100));        
        }
        catch(Exception e){return null;}
        return bigAux;
    }
    
    
    /**
     * Nos controla los campos de Leyenda y Comprobante
     * @return true en caso de que ambos esten completos false de lo contrario
     */
    private boolean controlarCampos(){
        if((!jTextField6.getText().equals(""))&&(!jTextField8.getText().equals("")))
            return true;
        else
            return false;
    }
    
    /**
     * Recorre la tabla y recalcula el debe el haber y saldo 
     */
    public void actualizarSaldoDebeHaber(){
        BigDecimal importe=new BigDecimal(0);
        BigDecimal iva=new BigDecimal(0);
        String impAux;
        BigDecimal ivaAux=new BigDecimal(0);
        for(int i=0;i<modelo.getRowCount();i++){
            //ivaAux=sumarIvaTotal(modelo.getValueAt(i,2)+"",modelo.getValueAt(i,5)+"");
           // ivaAux=modelo.getValueAt(i, 6)+"";
            impAux=modelo.getValueAt(i, 5)+"";
            iva=sumarBigDecimal(iva+"",ivaAux+"");
            importe=sumarBigDecimal(importe+"",impAux);
        }
        
        jTextField10.setText(importe+"");
        jTextField11.setText(sumarBigDecimal(importe+"",iva+"")+"");
    }
    
/*    private BigDecimal sumarIvaTotal(String codProducto,String subtotal){
        r_con.Connection();
        ResultSet rs=r_con.Consultar("select * from productos,tasas_iva where prod_codigo="+codProducto+" and prod_tasa_iva=tasa_id");
        float ivaProducto=
        //BigDecimal bigAux=
        
   // }
  */  
    private BigDecimal multiplicarBigDecimal(String num1,int num2){        
        float num1Float=Float.parseFloat(num1);
        String formato1=new DecimalFormat("0.00").format(num1Float);
        formato1=formato1.replace(',', '.');
        BigDecimal num1BigD=new BigDecimal(formato1);
        for(int i=1;i<num2;i++){
            num1BigD=sumarBigDecimal(num1BigD+"",num1BigD+"");
        }
        return num1BigD;
    }
    
    
    private BigDecimal sumarBigDecimal(String num1,String num2){        
        float num1Float=Float.parseFloat(num1);
        float num2Float=Float.parseFloat(num2);
        String formato1=new DecimalFormat("0.00").format(num1Float);
        String formato2=new DecimalFormat("0.00").format(num2Float);
        formato1=formato1.replace(',', '.');
        formato2=formato2.replace(',', '.');        
        BigDecimal num1BigD=new BigDecimal(formato1);
        BigDecimal num2BigD=new BigDecimal(formato2);
        BigDecimal suma=num1BigD.add(num2BigD);        
        return suma;
    }
    
    private BigDecimal convertirEnBigDecimal(String num){
        float num1=Float.parseFloat(num);
        String formato=new DecimalFormat("0.00").format(num1);
        formato=formato.replace(',','.');
        BigDecimal bigNum=new BigDecimal(formato);
        return bigNum;
    }
    
     private void ordenarFoco() {        
        field_tipo_comprobante.setNextFocusableComponent(field_punto_venta);
        field_punto_venta.setNextFocusableComponent(field_nro_cliente);
        field_nro_cliente.setNextFocusableComponent(fecha_factura);
        fecha_factura.setNextFocusableComponent(btn_confirmar_encabezado);
        btn_confirmar_encabezado.setNextFocusableComponent(field_tipo_comprobante);               
    }
    
        
    
}
